document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("content");if(!s)return;let d="David Wang",c=Array.from(document.querySelectorAll(".subtitle .menu a.item")),n=document.querySelector(".container > h1"),i=document.querySelector(".subtitle > span:first-child"),l=i?i.closest(".subtitle"):null,e=document.querySelector("footer"),a={menuMeasureSpan:null,highlightPromise:null,mathjaxPromise:null};let t=e=>{var t;return e?(a.menuMeasureSpan||((t=document.createElement("span")).id="menu-measure",t.style.visibility="hidden",t.style.position="absolute",t.style.whiteSpace="nowrap",document.body.appendChild(t),a.menuMeasureSpan=t),t=a.menuMeasureSpan,e=window.getComputedStyle(e),t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStretch=e.fontStretch,t):null},o=e=>{var t=parseFloat(e.lineHeight);return Number.isFinite(t)?t:(t=parseFloat(e.fontSize),Number.isFinite(t)?1.2*t:16)},r=e=>{if(e){var a=e.closest(".subtitle")||e.closest("footer");if(a){var i=t(e);if(i){var n=a.offsetWidth,l=(i.textContent="0",i.offsetWidth),r=(e.classList.remove("menu--stacked"),e.offsetWidth,e.querySelectorAll(".item, a"));let t=0;r.forEach(e=>{t+=e.offsetWidth});var o=t+l*(r.length-1),r=a.classList.contains("subtitle")?a:null,s=r?r.querySelector("span:first-child"):null,d=[];if(s){let e=0;for(;s.hasAttribute("data-subtitle-"+e);)d.push(s.getAttribute("data-subtitle-"+e)),e++}if(n<o)s&&0<d.length&&(s.textContent=d[d.length-1],r.classList.add("subtitle--stacked")),e.classList.add("menu--stacked");else if(r&&s&&0<d.length){var c,u=4*l;let e=null;for(c of d)if(i.textContent=c,i.offsetWidth+u+o<=n){e=c;break}e?(s.textContent=e,r.classList.remove("subtitle--stacked")):(s.textContent=d[d.length-1],r.classList.add("subtitle--stacked"))}}}}},u=()=>{document.querySelectorAll(".menu").forEach(r)},h;u(),window.addEventListener("resize",()=>{clearTimeout(h),h=setTimeout(u,10)});var m=(e=>{if(!e)return[];var t,a=[];let i=0;for(;e.hasAttribute("data-subtitle-"+i);){var n=(e.getAttribute("data-subtitle-"+i)||"").trim();n&&a.push(n),i++}return a.length||(t=(e.textContent||"").trim())&&a.push(t),a})(i);let p={title:n?n.textContent.trim():d,subtitle:i?i.textContent.trim():"",subtitleVariants:m},v={"/":{fragment:"_content/home.html",documentTitle:d},"/projects":{fragment:"_content/projects.html",documentTitle:"Projects - "+d},"/writing":{fragment:"_content/writing.html",documentTitle:"Writing - "+d},"/index.html":{fragment:"_content/home.html",documentTitle:d}},g=(e,t={})=>{let a=document.createElement("link");return a.rel="stylesheet",a.href=e,Object.entries(t).forEach(([e,t])=>{void 0!==t&&(a[e]=t)}),document.head.appendChild(a),a},f=(i,n={})=>new Promise((e,t)=>{let a=document.createElement("script");a.src=i,Object.entries(n).forEach(([e,t])=>{void 0!==t&&(a[e]=t)}),a.onload=()=>e(a),a.onerror=()=>t(new Error("Failed to load script: "+i)),document.body.appendChild(a)}),F=()=>(a.mathjaxPromise||(a.mathjaxPromise=new Promise((e,t)=>{window.MathJax&&window.MathJax.typesetPromise?e():(window.MathJax={tex:{inlineMath:[],displayMath:[["\\[","\\]"]]},output:{font:"mathjax-pagella"},options:{enableMenu:!1,enableExplorer:!1,enableAssistiveMml:!1,enableEnrichment:!1},startup:{typeset:!1}},f("https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js",{async:!0}).then(()=>{window.MathJax&&window.MathJax.startup?window.MathJax.startup.promise.then(()=>{e()}).catch(e=>{a.mathjaxPromise=null,t(e)}):e()}).catch(e=>{a.mathjaxPromise=null,t(e)}))})),a.mathjaxPromise),I=()=>(a.highlightPromise||(a.highlightPromise=new Promise((e,t)=>{window.hljs?e():(g("https://unpkg.com/@catppuccin/highlightjs@1.0.1/css/catppuccin-mocha.css"),f("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js").then(()=>{e()}).catch(e=>{a.highlightPromise=null,t(e)}))})),a.highlightPromise),b=(e,s)=>{if(e&&s){let i=document.createElement("div"),n=(i.className="code-block__custom-scrollbar",document.createElement("div")),l=(n.className="code-block__scrollbar-track",document.createElement("div"));l.className="code-block__scrollbar-thumb",n.appendChild(l),i.appendChild(n),e.appendChild(i);e=()=>{var e,t=s.scrollWidth,a=s.clientWidth;t<=a?i.style.display="none":(i.style.display="block",e=a/t*n.offsetWidth,t=s.scrollLeft/(t-a)*(n.offsetWidth-e),l.style.width=e+"px",l.style.left=t+"px")};s.addEventListener("scroll",e,{passive:!0});let a=!1,r=0,o=0;l.addEventListener("pointerdown",e=>{a=!0,r=e.clientX,o=s.scrollLeft,l.setPointerCapture(e.pointerId),e.preventDefault()}),l.addEventListener("pointermove",e=>{var t;a&&(e=e.clientX-r,t=s.scrollWidth-s.clientWidth,e=e/(n.offsetWidth-l.offsetWidth)*t,s.scrollLeft=o+e)}),l.addEventListener("pointerup",e=>{a=!1,l.releasePointerCapture(e.pointerId)}),l.addEventListener("pointercancel",e=>{a=!1,l.releasePointerCapture(e.pointerId)}),n.addEventListener("click",e=>{var t;e.target!==l&&(t=n.getBoundingClientRect(),e=e.clientX-t.left,t=s.scrollWidth-s.clientWidth,e=e/n.offsetWidth,s.scrollLeft=e*t)}),e(),new ResizeObserver(e).observe(s)}},R=(document.addEventListener("dragstart",e=>{if("IMG"===e.target.tagName)return e.preventDefault(),!1}),(e=document)=>{let t=e.querySelectorAll("pre code");0<t.length&&I().then(()=>{t.forEach(e=>{"undefined"!=typeof hljs&&hljs.highlightElement(e)})}).catch(e=>{console.error("Syntax highlighting unavailable:",e)}),e.querySelectorAll(".code-block").forEach(e=>{var t=e.querySelector(".code-scroll");t&&!e.querySelector(".code-block__custom-scrollbar")&&b(e,t)}),e.querySelectorAll(".code-language-tag").forEach(n=>{if("true"===n.dataset.enhanced)return;let t=n.closest(".code-block");var e=t?t.querySelector("pre"):n.closest("pre");let a=e?e.querySelector("code"):null;if(!e||!a)return;let i=t||e;e=t?t.querySelector(".code-scroll"):null;let l=()=>!(t&&void 0!==t._touchActive&&!t._touchActive||!i)&&i.matches(":hover"),r=(e=100)=>{t&&(t._hoverRemovalTimer&&(clearTimeout(t._hoverRemovalTimer),t._hoverRemovalTimer=null),t.classList.contains("code-block--hover")||(t._hoverAdditionTimer&&(clearTimeout(t._hoverAdditionTimer),t._hoverAdditionTimer=null),t._hoverAdditionTimer=setTimeout(()=>{t.classList.add("code-block--hover"),t._hoverAdditionTimer=null},e)))},o=(e=900)=>{t&&(t._hoverAdditionTimer&&(clearTimeout(t._hoverAdditionTimer),t._hoverAdditionTimer=null),t._hoverRemovalTimer&&clearTimeout(t._hoverRemovalTimer),t._hoverRemovalTimer=setTimeout(()=>{t._hoverPointerActive||t._hoverFocusActive||l()||(h(),t.classList.remove("code-block--hover")),t._hoverRemovalTimer=null},e))},s=e=>{t&&(t._hoverPointerActive=!!e,e)&&r()},d=e=>{t&&(t._hoverFocusActive=!!e,e)&&r()};let c=()=>{n._labelAnimation&&(n._labelAnimation.fadeOutTimer&&clearTimeout(n._labelAnimation.fadeOutTimer),n._labelAnimation.fadeInTimer&&clearTimeout(n._labelAnimation.fadeInTimer),n._labelAnimation=null,n._pendingLabel=null,n.style.transition="",n.style.opacity="1")},u=(e,{immediate:t=!1}={})=>{let i=(e||"").toLowerCase();if(i&&(t||n._currentLabel!==i&&n._pendingLabel!==i)){let a=()=>{n.textContent=i,n._currentLabel=i,n._pendingLabel=null};if(t)c(),a(),n.style.transition="",n.style.opacity="1";else{c(),n._pendingLabel=i;n.style.transition="opacity 0.12s ease",n.style.opacity="0";let t=setTimeout(()=>{a(),n.style.transition="opacity 0.22s ease",n.style.opacity="1";var e=setTimeout(()=>{c()},220);n._labelAnimation={fadeOutTimer:t,fadeInTimer:e}},120);n._labelAnimation={fadeOutTimer:t,fadeInTimer:null}}}},h=()=>{"copied"!==n.dataset.state&&"error"!==n.dataset.state&&n._currentLabel&&n._currentLabel!==n.dataset.originalLabel&&u(n.dataset.originalLabel)},m="copy";var p=(n.textContent||"").trim().toLowerCase()||"code";n.dataset.originalLabel=p,n.dataset.enhanced="true",u(p,{immediate:!0}),n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.setAttribute("aria-label",`Copy ${p} to clipboard`);let v=()=>{n.dataset.state="",t&&t._hoverPointerActive?u(m):u(n.dataset.originalLabel)},g=()=>{"copied"!==n.dataset.state&&"error"!==n.dataset.state&&u(m)};let f=()=>{n.dataset.state="error",u("error"),n.blur(),n._copyTimer&&clearTimeout(n._copyTimer),n._copyTimer=setTimeout(v,1500)},b=()=>{n.dataset.state="copied",u("copied!"),n.blur(),n._copyTimer&&clearTimeout(n._copyTimer),n._copyTimer=setTimeout(v,1500)},y=async e=>{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select();let a=!1;try{a=document.execCommand("copy")}finally{document.body.removeChild(t)}return a},w=async()=>{var e=a.innerText||a.textContent||"";if(e)try{(await y(e)?b:f)()}catch(e){console.error("Unable to copy code block:",e),f()}else f()};p=()=>{t&&(t._touchActive=!1),s(!1),"copied"===n.dataset.state||"error"===n.dataset.state?o():(u(n.dataset.originalLabel),o(350))};i&&(i.addEventListener("mouseenter",()=>{s(!0),g()}),i.addEventListener("mouseleave",()=>{s(!1),"copied"!==n.dataset.state&&"error"!==n.dataset.state&&u(n.dataset.originalLabel),o(0)}),i.addEventListener("touchstart",()=>{t&&(t._touchActive=!0),s(!0),g()},{passive:!0}),i.addEventListener("touchend",p),i.addEventListener("touchcancel",p)),e&&e.addEventListener("scroll",()=>{r(0),t&&t._scrollEndTimer&&clearTimeout(t._scrollEndTimer),t&&t._touchActive||(l()?(s(!0),g()):t&&t._hoverFocusActive||t&&(t._scrollEndTimer=setTimeout(()=>{o(300),t._scrollEndTimer=null},150)))},{passive:!0}),n.addEventListener("focus",()=>{d(!0),g()}),n.addEventListener("blur",()=>{d(!1),t&&t._hoverPointerActive?g():("copied"!==n.dataset.state&&"error"!==n.dataset.state&&u(n.dataset.originalLabel),o(0))}),n.addEventListener("click",e=>{e.preventDefault(),d(!0),g(),w()}),n.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d(!0),g(),w())})})}),B=e=>(e||"").toLowerCase().trim().replace(/["'`~!@#$%^&*()=+\[\]{}|;:\\<>,.?/]+/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),O=(e,t)=>{if(!e)return null;var a=(e.getAttribute("id")||"").trim();if(a)return a;let i=t||"section",n=2;for(;document.getElementById(i);)i=`${t||"section"}-`+n++;return e.setAttribute("id",i),i},y=(t,e)=>{t=t.querySelector("[data-toc]");if(t){let i=[];var a=n?O(n,"introduction"):null;if(a&&i.push({level:1,id:a,label:"Introduction"}),e.forEach(t=>{var a=parseInt((t.tagName||"").slice(1),10);if(!(!t.id||Number.isNaN(a)||a<2||3<a)){let e=t.dataset.headingLabel;e||(e=(t.textContent||"").trim().replace(/^#\s*/,""),t.dataset.headingLabel=e),i.push({level:a,id:t.id,label:e})}}),i.length){t.classList.remove("is-empty"),t.innerHTML="";let e=document.createElement("ol"),n=(e.className="writing-toc__list",t.appendChild(e),null);i.forEach(t=>{if(1===t.level)(a=document.createElement("li")).className="writing-toc__item writing-toc__item--level-1",(i=document.createElement("a")).href="#"+t.id,i.textContent=t.label,a.appendChild(i),e.appendChild(a),n=null;else if(2===t.level)(i=document.createElement("li")).className="writing-toc__item writing-toc__item--level-2",(a=document.createElement("a")).href="#"+t.id,a.textContent=t.label,i.appendChild(a),e.appendChild(i),n=i;else if(3===t.level)if(n){let e=n.querySelector("ol");e||((e=document.createElement("ol")).className="writing-toc__sublist",n.appendChild(e));var a=document.createElement("li"),i=(a.className="writing-toc__item writing-toc__item--level-3",document.createElement("a"));i.href="#"+t.id,i.textContent=t.label,a.appendChild(i),e.appendChild(a)}else(i=document.createElement("li")).className="writing-toc__item writing-toc__item--level-2",(a=document.createElement("a")).href="#"+t.id,a.textContent=t.label,i.appendChild(a),e.appendChild(i),n=i})}else t.innerHTML="",t.classList.add("is-empty")}},w=(e=document)=>{let r=e.querySelector(".writing-post__rail-right");if(r){e=e.querySelector(".writing-post__content");if(e){var t=r.querySelector(".sidenote--rail");if(!t||"none"!==window.getComputedStyle(t).display){t=Array.from(e.querySelectorAll("label.sidenote-number"));if(t.length){let n=e.getBoundingClientRect(),l=[];t.forEach(e=>{var t,a,i=e.getAttribute("for");i&&(i=r.querySelector(`.sidenote--rail[data-sidenote-ref="${i}"]`))&&(a=e.parentElement)&&(t=a.getBoundingClientRect(),a=window.getComputedStyle(a),a=o(a),e=e.getBoundingClientRect().top-t.top,e=Math.round(e/a)*a,a=t.top-n.top+e,l.push({sidenote:i,idealTop:a,height:0}))}),l.forEach((t,a)=>{t.sidenote.style.top=t.idealTop+"px",t.height=t.sidenote.getBoundingClientRect().height;var e=window.getComputedStyle(t.sidenote),i=.5*o(e);for(let e=0;e<a;e++){var n=l[e],n=(parseFloat(n.sidenote.style.top)||0)+n.height;(parseFloat(t.sidenote.style.top)||0)<n+i&&(t.sidenote.style.top=(n=n+i)+"px",t.idealTop=n)}})}}}}},E;window.addEventListener("resize",()=>{clearTimeout(E),E=setTimeout(()=>{w(document)},10)});let _=(e,{animate:t=!0}={})=>!!e&&!!(e=document.getElementById(e))&&(e.scrollIntoView({behavior:t?"smooth":"auto",block:"start",inline:"nearest"}),!0),T=null,A=!1,L=e=>{T!==e&&(T&&T.removeAttribute("data-selection-active"),(T=e||null)?(T.setAttribute("data-selection-active","true"),document.body.setAttribute("data-selection-lock","true")):document.body.removeAttribute("data-selection-lock"))},x=()=>{T&&(T.removeAttribute("data-selection-active"),T=null),document.body.removeAttribute("data-selection-lock"),A=!1},C=e=>e&&e instanceof Node&&(e=e.nodeType===Node.TEXT_NODE?e.parentNode:e)&&e instanceof Element&&(e.closest(".sidenote")||e.closest(".math-display")||e.closest("table")||e.closest(".writing-post__content"))||null;document.addEventListener("pointerdown",e=>{e=C(e.target);e?(L(e),A=!0):x()},{capture:!0});document.addEventListener("pointerup",()=>{var e;A=!1,document.getSelection&&(e=document.getSelection())&&!e.isCollapsed||x()}),document.addEventListener("pointercancel",x),window.addEventListener("blur",x),document.addEventListener("selectionchange",()=>{var e=document.getSelection?document.getSelection():null;e&&!e.isCollapsed&&0!==e.rangeCount&&(e=C(e.anchorNode)||C(e.focusNode))?L(e):A||x()});let S=e=>{if(!e)return"/";let t=e.split("?")[0].split("#")[0];return(t=1<(t=t.startsWith("/")?t:"/"+t).length&&t.endsWith("/")?t.slice(0,-1):t)||"/"},k=e=>{var e=S(e);return v[e]||(e.startsWith("/writing/")&&e.length>"/writing/".length&&(e=e.slice("/writing/".length))&&(e=e.replace(/\/+/g,"").replace(/\.html$/i,""))?{fragment:`_content/writing/${e}.html`,documentTitle:null,canonicalPath:"/writing/"+e}:null)},q=()=>{var e;return p.subtitleVariants&&0<p.subtitleVariants.length?[...p.subtitleVariants]:(e=(p.subtitle||"").trim())?[e]:[]},D=e=>{var t;return Array.isArray(e)?(t=e.map(e=>(e||"").trim()).filter(Boolean)).length?t:q():"string"==typeof e&&(t=e.trim())?[t]:q()},N=(t,a)=>{if(n&&(n.textContent=t||p.title,n.classList.add("loaded")),i){t=D(a),a=t[0]||p.subtitle||"";i.textContent=a;let e=0;for(;i.hasAttribute("data-subtitle-"+e);)i.removeAttribute("data-subtitle-"+e),e++;t.forEach((e,t)=>{i.setAttribute("data-subtitle-"+t,e)}),l&&l.classList.add("loaded")}e&&e.classList.add("loaded")},P=async(e,t=!0)=>{var e=S(e),a=k(e);if(!a||!a.fragment)return console.error("No route found for path: "+e),s.innerHTML="<p>Page not found.</p>",document.title="Not Found - "+d,N(p.title,p.subtitleVariants),null;var i,n,e=a.canonicalPath||e,l=a.fragment.startsWith("/")?a.fragment:"/"+a.fragment;try{var r,o=await fetch(l);if(o.ok)return r=await o.text(),s.style.opacity="0",n=150,await new Promise(e=>setTimeout(e,n)),s.innerHTML=r,x(),[i=document]=[s],i.querySelectorAll(".writing-post table").forEach(e=>{var t,a;e.parentElement&&e.parentElement.classList.contains("table-wrapper")||((t=document.createElement("div")).className="table-wrapper",(a=document.createElement("div")).className="table-scroll",e.parentNode.insertBefore(t,e),a.appendChild(e),t.appendChild(a),b(t,a))}),R(s),((e=document)=>{let t=e.querySelectorAll(".math-display");0!==t.length&&F().then(()=>{let a=[];t.forEach(e=>{var t;"true"!==e.dataset.rendered&&(t=e.textContent.trim(),e.dataset.latex||(e.dataset.latex=t),e.textContent=`\\[${t}\\]`,a.push(e))}),0<a.length&&window.MathJax&&window.MathJax.typesetPromise&&window.MathJax.typesetPromise(a).then(()=>{a.forEach(e=>{e.dataset.rendered="true"})}).catch(e=>{console.error("Error rendering math:",e)})}).catch(e=>{console.error("MathJax unavailable:",e)})})(s),((e=document)=>{var t=e.querySelectorAll("h2, h3");if(t.length){let m=new Set(Array.from(document.querySelectorAll("[id]")).map(e=>e.id));t.forEach(i=>{let n=i.dataset.headingLabel;if(n||(n=(i.textContent||"section").trim().replace(/^#\s*/,""),i.dataset.headingLabel=n),"true"!==i.dataset.headingEnhanced){let a=(i.getAttribute("id")||"").trim();if(!a){var l=B(n)||"section";let e=l,t=2;for(;m.has(e);)e=l+"-"+t++;a=e,i.setAttribute("id",a),m.add(a)}var e=i.querySelector(".heading-anchor");if(!e){(e=document.createElement("a")).className="heading-anchor",e.href="#"+a,e.setAttribute("aria-label","Link to section: "+n),e.textContent="#";for(var t,r,o,s,d,c,u=[],h=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,!1);t=h.nextNode();)t.textContent.trim()&&u.push(t);0<u.length&&(d=(o=(r=u[u.length-1]).textContent).trimEnd(),o=o.slice(d.length),c=d.lastIndexOf(" "),s=d.slice(0,c+1),d=d.slice(c+1))?((c=document.createElement("span")).style.whiteSpace="nowrap",c.textContent=d,c.appendChild(e),r.textContent=s+o,r.parentNode.insertBefore(c,r.nextSibling)):i.appendChild(e)}i.dataset.headingEnhanced="true"}}),y(e,t),w(e)}else y(e,t)})(s),(t=>{var a=s.querySelector("[data-page-title]");if(a){var i,n=(a.getAttribute("data-page-title")||"").trim(),l=[];let e=0;for(;a.hasAttribute("data-page-subtitle-"+e);){var r=(a.getAttribute("data-page-subtitle-"+e)||"").trim();r&&l.push(r),e++}0===l.length&&(i=(a.getAttribute("data-page-subtitle")||"").trim())&&l.push(i),N(n||p.title,0<l.length?l:p.subtitleVariants),!t.documentTitle&&n&&(document.title=n+" - "+d),void u()}else t&&t.heading?({title:i,subtitle:n}=t.heading,N(i,n)):N(p.title,p.subtitleVariants),u()})(a),a.documentTitle&&(document.title=a.documentTitle),(e=>{e=S(e);let t=e.startsWith("/writing/")?"/writing":e;c.forEach(e=>{S(e.getAttribute("href"))===t?e.classList.add("active"):e.classList.remove("active")})})(e),t&&(history.pushState({path:e,hash:null},document.title,e),window.scrollTo(0,0)),W=e,s.style.opacity="1",e;throw new Error(`HTTP ${o.status}: `+o.statusText)}catch(e){return console.error("Error loading content:",e),s.innerHTML=`<p>Error loading page: ${e.message}</p>`,document.title="Error - "+d,N(p.title,p.subtitleVariants),s.style.opacity="1",null}},W=(c.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e=t.getAttribute("href"),e=S(e);e!==S(window.location.pathname)&&P(e)})}),null),M=()=>S(window.location.pathname),j=(s.addEventListener("click",e=>{var t=e.target.closest("a");if(t&&!(t.target&&"_self"!==t.target||t.hasAttribute("download")||"external"===t.getAttribute("rel"))){var a=t.getAttribute("href");if(a)if(a.startsWith("#")){a=a.slice(1);a&&(e.preventDefault(),i=M(),history.pushState({path:i,hash:a},document.title,window.location.pathname+"#"+a),_(a,{animate:!0}))}else{var i=new URL(t.href,window.location.origin);if(i.origin===window.location.origin){let a=S(i.pathname);if(k(a)){e.preventDefault();let t=i.hash?i.hash.slice(1):null;P(a).then(e=>{t&&(e=e||a,history.replaceState({path:e,hash:t},document.title,e+"#"+t),_(t,{animate:!0}))})}}}}}),window.addEventListener("popstate",e=>{var t=e.state&&e.state.path?e.state.path:M();let a=e.state&&"string"==typeof e.state.hash?e.state.hash:window.location.hash?window.location.hash.slice(1):null;t===W?a?_(a,{animate:!0}):window.scrollTo({top:0,behavior:"smooth"}):P(t,!1).then(()=>{a?requestAnimationFrame(()=>{_(a,{animate:!0})}):window.scrollTo({top:0,behavior:"smooth"})})}),window.addEventListener("hashchange",()=>{let e=window.location.hash?window.location.hash.slice(1):null;e?requestAnimationFrame(()=>{_(e,{animate:!0})}):window.scrollTo({top:0,behavior:"smooth"})}),S(window.location.pathname));if(k(j)){let t=window.location.hash?window.location.hash.slice(1):null;P(j,!1).then(e=>{e=e||S(j);history.replaceState({path:e,hash:t},document.title,t?e+"#"+t:e),t&&requestAnimationFrame(()=>{_(t,{animate:!1})})})}else P("/",!1).then(()=>{history.replaceState({path:"/",hash:null},d,"/")})});