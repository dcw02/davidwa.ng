document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("content");if(!e)return;let t="David Wang",l=Array.from(document.querySelectorAll(".subtitle .menu a.item")),r=document.querySelector(".container > h1"),i=document.querySelector(".subtitle > span:first-child"),n=e=>{if(!e)return[];let t=[],l=0;for(;e.hasAttribute(`data-subtitle-${l}`);){let r=(e.getAttribute(`data-subtitle-${l}`)||"").trim();r&&t.push(r),l++}if(!t.length){let i=(e.textContent||"").trim();i&&t.push(i)}return t},a=e=>{if(!e)return;let t=e.closest(".subtitle")||e.closest("footer");if(!t)return;let l=document.getElementById("menu-measure");if(!l){(l=document.createElement("span")).id="menu-measure",l.style.visibility="hidden",l.style.position="absolute",l.style.whiteSpace="nowrap";let r=window.getComputedStyle(e);l.style.fontSize=r.fontSize,l.style.fontFamily=r.fontFamily,l.style.fontWeight=r.fontWeight,l.style.fontStretch=r.fontStretch,document.body.appendChild(l)}let i=t.offsetWidth;l.textContent="0";let n=l.offsetWidth;e.classList.remove("menu--stacked"),e.offsetWidth;let a=e.querySelectorAll(".item, a"),o=0;a.forEach(e=>{o+=e.offsetWidth});let s=o+n*(a.length-1),d=t.classList.contains("subtitle")?t:null,c=d?d.querySelector("span:first-child"):null,u=[];if(c){let h=0;for(;c.hasAttribute(`data-subtitle-${h}`);)u.push(c.getAttribute(`data-subtitle-${h}`)),h++}if(s>i){c&&u.length>0&&(c.textContent=u[u.length-1],d.classList.add("subtitle--stacked")),e.classList.add("menu--stacked");return}if(d&&c&&u.length>0){let p=4*n,m=null;for(let f of u){l.textContent=f;let g=l.offsetWidth,b=g+p+s;if(b<=i){m=f;break}}m?(c.textContent=m,d.classList.remove("subtitle--stacked")):(c.textContent=u[u.length-1],d.classList.add("subtitle--stacked"))}},o=()=>{document.querySelectorAll(".menu").forEach(a)},s,d=()=>{clearTimeout(s),s=setTimeout(o,10)};o(),window.addEventListener("resize",d);let c=n(i),u={title:r?r.textContent.trim():t,subtitle:i?i.textContent.trim():"",subtitleVariants:c},h={"/":{fragment:"_content/home.html",documentTitle:t},"/projects":{fragment:"_content/projects.html",documentTitle:`Projects - ${t}`},"/writing":{fragment:"_content/writing.html",documentTitle:`Writing - ${t}`},"/index.html":{fragment:"_content/home.html",documentTitle:t}},p=e=>new Promise(t=>setTimeout(t,e)),m=!1,f=!1,g=!1,b=!1,y=()=>new Promise((e,t)=>{if(g){e();return}if(b){let l=setInterval(()=>{g&&(clearInterval(l),e())},50);return}b=!0;let r=document.createElement("link");r.rel="stylesheet",r.href="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.css",r.integrity="sha384-WcoG4HRXMzYzfCgiyfrySxx90XSl2rxY5mnVY5TwtWE6KLrArNKn0T/mOgNL0Mmi",r.crossOrigin="anonymous",document.head.appendChild(r);let i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.js",i.integrity="sha384-J+9dG2KMoiR9hqcFao0IBLwxt6zpcyN68IgwzsCSkbreXUjmNVRhPFTssqdSGjwQ",i.crossOrigin="anonymous",i.onload=()=>{g=!0,b=!1,e()},i.onerror=()=>{b=!1,t(Error("Failed to load KaTeX"))},document.body.appendChild(i)}),v=()=>new Promise((e,t)=>{if(m){e();return}if(f){let l=setInterval(()=>{m&&(clearInterval(l),e())},50);return}f=!0;let r=document.createElement("link");r.rel="stylesheet",r.href="https://unpkg.com/@catppuccin/highlightjs@1.0.1/css/catppuccin-mocha.css",document.head.appendChild(r);let i=document.createElement("script");i.src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js",i.onload=()=>{m=!0,f=!1,e()},i.onerror=()=>{f=!1,t(Error("Failed to load Highlight.js"))},document.body.appendChild(i)}),$=(e,t)=>{if(!e||!t)return;let l=document.createElement("div");l.className="code-block__custom-scrollbar";let r=document.createElement("div");r.className="code-block__scrollbar-track";let i=document.createElement("div");i.className="code-block__scrollbar-thumb",r.appendChild(i),l.appendChild(r),e.appendChild(l);let n=()=>{let e=t.scrollWidth,n=t.clientWidth;if(e<=n){l.style.display="none";return}l.style.display="block";let a=n/e*r.offsetWidth,o=e-n,s=t.scrollLeft/o,d=r.offsetWidth-a,c=s*d;i.style.width=`${a}px`,i.style.left=`${c}px`};t.addEventListener("scroll",n,{passive:!0});let a=!1,o=0,s=0;i.addEventListener("pointerdown",e=>{a=!0,o=e.clientX,s=t.scrollLeft,i.setPointerCapture(e.pointerId),e.preventDefault()}),i.addEventListener("pointermove",e=>{if(!a)return;let l=e.clientX-o,n=t.scrollWidth,d=t.clientWidth,c=n-d,u=r.offsetWidth-i.offsetWidth,h=l/u*c;t.scrollLeft=s+h}),i.addEventListener("pointerup",e=>{a=!1,i.releasePointerCapture(e.pointerId)}),i.addEventListener("pointercancel",e=>{a=!1,i.releasePointerCapture(e.pointerId)}),r.addEventListener("click",e=>{if(e.target===i)return;let l=r.getBoundingClientRect(),n=e.clientX-l.left,a=t.scrollWidth,o=t.clientWidth,s=a-o,d=n/r.offsetWidth;t.scrollLeft=d*s}),n();let d=new ResizeObserver(n);d.observe(t)};document.addEventListener("dragstart",e=>{if("IMG"===e.target.tagName)return e.preventDefault(),!1});let E=(e=document)=>{let t=e.querySelectorAll("article.writing-post table");t.forEach(e=>{if(e.parentElement&&e.parentElement.classList.contains("table-wrapper"))return;let t=document.createElement("div");t.className="table-wrapper";let l=document.createElement("div");l.className="table-scroll",e.parentNode.insertBefore(t,e),l.appendChild(e),t.appendChild(l),$(t,l)})},L=(e=document)=>{let t=e.querySelectorAll(".math-inline, .math-display");0!==t.length&&y().then(()=>{t.forEach(e=>{if("true"===e.dataset.rendered)return;let t=e.textContent,l=e.classList.contains("math-display");try{"undefined"!=typeof katex&&(katex.render(t,e,{displayMode:l,throwOnError:!1,output:"html"}),e.dataset.rendered="true")}catch(r){console.error("Error rendering math:",r)}})}).catch(e=>{console.error("KaTeX unavailable:",e)})},C=(e=document)=>{let t=e.querySelectorAll("pre code");t.length>0&&v().then(()=>{t.forEach(e=>{"undefined"!=typeof hljs&&hljs.highlightElement(e)})}).catch(e=>{console.error("Syntax highlighting unavailable:",e)}),e.querySelectorAll(".code-block").forEach(e=>{let t=e.querySelector(".code-scroll");t&&!e.querySelector(".code-block__custom-scrollbar")&&$(e,t)});let l=e.querySelectorAll(".code-language-tag");l.forEach(e=>{if("true"===e.dataset.enhanced)return;let t=e.closest(".code-block"),l=t?t.querySelector("pre"):e.closest("pre"),r=l?l.querySelector("code"):null;if(!l||!r)return;let i=t||l,n=t?t.querySelector(".code-scroll"):null,a=()=>(!t||void 0===t._touchActive||!!t._touchActive)&&!!i&&i.matches(":hover"),o=(e=100)=>{if(t)t._hoverRemovalTimer&&(clearTimeout(t._hoverRemovalTimer),t._hoverRemovalTimer=null),!t.classList.contains("code-block--hover")&&(t._hoverAdditionTimer&&(clearTimeout(t._hoverAdditionTimer),t._hoverAdditionTimer=null),t._hoverAdditionTimer=setTimeout(()=>{t.classList.add("code-block--hover"),t._hoverAdditionTimer=null},e))},s=(e=900)=>{t&&(t._hoverAdditionTimer&&(clearTimeout(t._hoverAdditionTimer),t._hoverAdditionTimer=null),t._hoverRemovalTimer&&clearTimeout(t._hoverRemovalTimer),t._hoverRemovalTimer=setTimeout(()=>{if(t._hoverPointerActive||t._hoverFocusActive||a()){t._hoverRemovalTimer=null;return}t.classList.remove("code-block--hover"),t._hoverRemovalTimer=null},e))},d=e=>{t&&(t._hoverPointerActive=!!e,e&&o())},c=e=>{t&&(t._hoverFocusActive=!!e,e&&o())},u=()=>{e._labelAnimation&&(e._labelAnimation.fadeOutTimer&&clearTimeout(e._labelAnimation.fadeOutTimer),e._labelAnimation.fadeInTimer&&clearTimeout(e._labelAnimation.fadeInTimer),e._labelAnimation=null,e._pendingLabel=null,e.style.transition="",e.style.opacity="1")},h=(t,{immediate:l=!1}={})=>{let r=(t||"").toLowerCase();if(!r||!l&&(e._currentLabel===r||e._pendingLabel===r))return;let i=()=>{e.textContent=r,e._currentLabel=r,e._pendingLabel=null};if(l){u(),i(),e.style.transition="",e.style.opacity="1";return}u(),e._pendingLabel=r;e.style.transition="opacity 0.12s ease",e.style.opacity="0";let n=setTimeout(()=>{i(),e.style.transition="opacity 0.22s ease",e.style.opacity="1";let t=setTimeout(()=>{u()},220);e._labelAnimation={fadeOutTimer:n,fadeInTimer:t}},120);e._labelAnimation={fadeOutTimer:n,fadeInTimer:null}},p="copy",m=(e.textContent||"").trim().toLowerCase()||"code";e.dataset.originalLabel=m,e.dataset.enhanced="true",h(m,{immediate:!0}),e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.setAttribute("aria-label",`Copy ${m} to clipboard`);let f=()=>{e.dataset.state="",t&&t._hoverPointerActive?h(p):h(e.dataset.originalLabel)},g=()=>{"copied"!==e.dataset.state&&"error"!==e.dataset.state&&h(p)},b=()=>{e.dataset.state="error",h("error"),e.blur(),e._copyTimer&&clearTimeout(e._copyTimer),e._copyTimer=setTimeout(f,1500)},y=()=>{e.dataset.state="copied",h("copied!"),e.blur(),e._copyTimer&&clearTimeout(e._copyTimer),e._copyTimer=setTimeout(f,1500)},v=async e=>{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;let t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select();let l=!1;try{l=document.execCommand("copy")}finally{document.body.removeChild(t)}return l},$=async()=>{let e=r.innerText||r.textContent||"";if(!e){b();return}try{let t=await v(e);t?y():b()}catch(l){console.error("Unable to copy code block:",l),b()}},E=()=>{d(!0),g()},L=()=>{if(d(!1),"copied"===e.dataset.state||"error"===e.dataset.state){s(0);return}h(e.dataset.originalLabel),s(0)},C=()=>{t&&(t._touchActive=!0),d(!0),g()},A=()=>{t&&(t._touchActive=!1),d(!1),"copied"!==e.dataset.state&&"error"!==e.dataset.state&&h(e.dataset.originalLabel)};i&&(i.addEventListener("mouseenter",E),i.addEventListener("mouseleave",L),i.addEventListener("touchstart",C,{passive:!0}),i.addEventListener("touchend",A),i.addEventListener("touchcancel",A)),n&&n.addEventListener("scroll",()=>{if(o(0),t&&t._scrollEndTimer&&clearTimeout(t._scrollEndTimer),t&&t._touchActive)return;let e=a();e?(d(!0),g()):!(t&&t._hoverFocusActive)&&t&&(t._scrollEndTimer=setTimeout(()=>{s(300),t._scrollEndTimer=null},150))},{passive:!0}),e.addEventListener("focus",()=>{c(!0),g()}),e.addEventListener("blur",()=>{if(c(!1),t&&t._hoverPointerActive)g();else{if("copied"===e.dataset.state||"error"===e.dataset.state){s(0);return}h(e.dataset.originalLabel),s(0)}}),e.addEventListener("click",e=>{e.preventDefault(),c(!0),g(),$()}),e.addEventListener("keydown",e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c(!0),g(),$())})})},A=e=>(e||"").toLowerCase().trim().replace(/["'`~!@#$%^&*()=+\[\]{}|;:\\<>,.?/]+/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),_=(e,t)=>{if(!e)return null;let l=(e.getAttribute("id")||"").trim();if(l)return l;let r=t||"section",i=2;for(;document.getElementById(r);)r=`${t||"section"}-${i++}`;return e.setAttribute("id",r),r},T=(e,t)=>{let l=e.querySelector("[data-toc]");if(!l)return;let r=[],i=document.querySelector(".container > h1"),n=i?_(i,"introduction"):null;if(n&&r.push({level:1,id:n,label:"Introduction"}),t.forEach(e=>{let t=parseInt((e.tagName||"").slice(1),10);if(!e.id||Number.isNaN(t)||t<2||t>3)return;let l=e.dataset.headingLabel;l||(l=(e.textContent||"").trim().replace(/^#\s*/,""),e.dataset.headingLabel=l),r.push({level:t,id:e.id,label:l})}),!r.length){l.innerHTML="",l.classList.add("is-empty");return}l.classList.remove("is-empty"),l.innerHTML="";let a=document.createElement("ol");a.className="writing-toc__list",l.appendChild(a);let o=null;r.forEach(e=>{if(1===e.level){let t=document.createElement("li");t.className="writing-toc__item writing-toc__item--level-1";let l=document.createElement("a");l.href=`#${e.id}`,l.textContent=e.label,t.appendChild(l),a.appendChild(t),o=null;return}if(2===e.level){let r=document.createElement("li");r.className="writing-toc__item writing-toc__item--level-2";let i=document.createElement("a");i.href=`#${e.id}`,i.textContent=e.label,r.appendChild(i),a.appendChild(r),o=r;return}if(3===e.level){if(!o){let n=document.createElement("li");n.className="writing-toc__item writing-toc__item--level-2";let s=document.createElement("a");s.href=`#${e.id}`,s.textContent=e.label,n.appendChild(s),a.appendChild(n),o=n;return}let d=o.querySelector("ol");d||((d=document.createElement("ol")).className="writing-toc__sublist",o.appendChild(d));let c=document.createElement("li");c.className="writing-toc__item writing-toc__item--level-3";let u=document.createElement("a");u.href=`#${e.id}`,u.textContent=e.label,c.appendChild(u),d.appendChild(c)}})},S=(e=document)=>{let t=e.querySelector(".writing-post__rail-right");if(!t)return;let l=e.querySelector(".writing-post__content");if(!l)return;let r=t.querySelector(".sidenote--rail");if(r&&"none"===window.getComputedStyle(r).display)return;let i=Array.from(l.querySelectorAll("label.sidenote-number"));if(!i.length)return;let n=l.getBoundingClientRect();t.getBoundingClientRect();let a=[];i.forEach(e=>{let l=e.getAttribute("for");if(!l)return;let r=t.querySelector(`.sidenote--rail[data-sidenote-ref="${l}"]`);if(!r)return;let i=e.parentElement,o=i.getBoundingClientRect(),s=window.getComputedStyle(i),d=parseFloat(s.lineHeight),c=e.getBoundingClientRect(),u=c.top-o.top,h=Math.round(u/d),p=h*d,m=o.top-n.top+p;a.push({sidenote:r,idealTop:m,height:0})}),a.forEach((e,t)=>{e.sidenote.style.top=`${e.idealTop}px`,e.height=e.sidenote.getBoundingClientRect().height;let l=window.getComputedStyle(e.sidenote),r=parseFloat(l.lineHeight),i=.5*r;for(let n=0;n<t;n++){let o=a[n],s=parseFloat(o.sidenote.style.top)+o.height,d=parseFloat(e.sidenote.style.top);d<s+i&&(e.sidenote.style.top=`${s+i}px`,e.idealTop=s+r)}})},w,x=()=>{clearTimeout(w),w=setTimeout(()=>{S(document)},10)};window.addEventListener("resize",x);let k=(e=document)=>{let t=e.querySelectorAll("h2, h3");if(!t.length){T(e,t);return}let l=new Set(Array.from(document.querySelectorAll("[id]")).map(e=>e.id));t.forEach(e=>{let t=e.dataset.headingLabel;if(t||(t=(e.textContent||"section").trim().replace(/^#\s*/,""),e.dataset.headingLabel=t),"true"===e.dataset.headingEnhanced)return;let r=(e.getAttribute("id")||"").trim(),i=r;if(!i){let n=A(t)||"section",a=n,o=2;for(;l.has(a);)a=`${n}-${o++}`;i=a,e.setAttribute("id",i),l.add(i)}let s=e.querySelector(".heading-anchor");if(!s){(s=document.createElement("a")).className="heading-anchor",s.href=`#${i}`,s.setAttribute("aria-label",`Link to section: ${t}`),s.textContent="#";let d=[],c=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),u;for(;u=c.nextNode();)u.textContent.trim()&&d.push(u);if(d.length>0){let h=d[d.length-1],p=h.textContent,m=p.trimEnd(),f=p.slice(m.length),g=m.lastIndexOf(" "),b=m.slice(0,g+1),y=m.slice(g+1);if(y){let v=document.createElement("span");v.style.whiteSpace="nowrap",v.textContent=y,v.appendChild(s),h.textContent=b+f,h.parentNode.insertBefore(v,h.nextSibling)}else e.appendChild(s)}else e.appendChild(s)}e.dataset.headingEnhanced="true"}),T(e,t),S(e)},q=(e,{animate:t=!0}={})=>{if(!e)return!1;let l=document.getElementById(e);return!!l&&(l.scrollIntoView({behavior:t?"smooth":"auto",block:"start",inline:"nearest"}),!0)},W=null,N=!1,R=e=>{if(W!==e){if(W&&W.removeAttribute("data-selection-active"),!(W=e||null)){document.body.removeAttribute("data-selection-lock");return}W.setAttribute("data-selection-active","true"),document.body.setAttribute("data-selection-lock","true")}},I=()=>{W&&(W.removeAttribute("data-selection-active"),W=null),document.body.removeAttribute("data-selection-lock"),N=!1},j=e=>{if(!e||!(e instanceof Node)||(e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),!e||!(e instanceof Element)))return null;let t=e.closest(".sidenote");if(t)return t;let l=e.closest("table");if(l)return l;let r=e.closest(".writing-post__content");return r||null};document.addEventListener("pointerdown",e=>{let t=j(e.target);t?(R(t),N=!0):I()},{capture:!0});let B=()=>{if(N=!1,!document.getSelection){I();return}let e=document.getSelection();(!e||e.isCollapsed)&&I()};document.addEventListener("pointerup",B),document.addEventListener("pointercancel",I),window.addEventListener("blur",I),document.addEventListener("selectionchange",()=>{let e=document.getSelection?document.getSelection():null;if(!e||e.isCollapsed||0===e.rangeCount){N||I();return}let t=j(e.anchorNode)||j(e.focusNode);t?R(t):N||I()});let P=e=>{if(!e)return"/";let t=e.split("?")[0].split("#")[0];return t.startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t||"/"},H=e=>{let t=P(e);if(h[t])return h[t];if(t.startsWith("/writing/")&&t.length>9){let l=t.slice(9);if(!l)return null;let r=l.replace(/\/+/g,"").replace(/\.html$/i,"");return r?{fragment:`_content/writing/${r}.html`,documentTitle:null,canonicalPath:`/writing/${r}`}:null}return null},M=()=>{if(u.subtitleVariants&&u.subtitleVariants.length>0)return[...u.subtitleVariants];let e=(u.subtitle||"").trim();return e?[e]:[]},V=e=>{if(Array.isArray(e)){let t=e.map(e=>(e||"").trim()).filter(Boolean);return t.length?t:M()}if("string"==typeof e){let l=e.trim();return l?[l]:M()}return M()},D=(e,t)=>{if(r&&(r.textContent=e||u.title,r.classList.add("loaded")),i){let l=V(t),n=l[0]||u.subtitle||"";i.textContent=n;let a=0;for(;i.hasAttribute(`data-subtitle-${a}`);)i.removeAttribute(`data-subtitle-${a}`),a++;l.forEach((e,t)=>{i.setAttribute(`data-subtitle-${t}`,e)});let o=document.querySelector(".subtitle");o&&o.classList.add("loaded")}let s=document.querySelector("footer");s&&s.classList.add("loaded")},F=l=>{let r=e.querySelector("[data-page-title]");if(r){let i=(r.getAttribute("data-page-title")||"").trim(),n=[],a=0;for(;r.hasAttribute(`data-page-subtitle-${a}`);){let s=(r.getAttribute(`data-page-subtitle-${a}`)||"").trim();s&&n.push(s),a++}if(0===n.length){let d=(r.getAttribute("data-page-subtitle")||"").trim();d&&n.push(d)}D(i||u.title,n.length>0?n:u.subtitleVariants),!l.documentTitle&&i&&(document.title=`${i} - ${t}`),o();return}if(l&&l.heading){let{title:c,subtitle:h}=l.heading;D(c,h),o();return}D(u.title,u.subtitleVariants),o()},O=e=>{let t=P(e),r=t.startsWith("/writing/")?"/writing":t;l.forEach(e=>{let t=P(e.getAttribute("href"));t===r?e.classList.add("active"):e.classList.remove("active")})},X=async(l,r=!0)=>{let i=P(l),n=H(i);if(!n||!n.fragment)return console.error(`No route found for path: ${i}`),e.innerHTML="<p>Page not found.</p>",document.title=`Not Found - ${t}`,D(u.title,u.subtitleVariants),null;let a=n.canonicalPath||i,o=n.fragment.startsWith("/")?n.fragment:`/${n.fragment}`;try{let s=await fetch(o);if(!s.ok)throw Error(`HTTP ${s.status}: ${s.statusText}`);let d=await s.text();return e.style.opacity="0",await p(150),e.innerHTML=d,I(),E(e),C(e),L(e),k(e),F(n),n.documentTitle&&(document.title=n.documentTitle),O(a),r&&(history.pushState({path:a,hash:null},document.title,a),window.scrollTo(0,0)),z=a,e.style.opacity="1",a}catch(c){return console.error("Error loading content:",c),e.innerHTML=`<p>Error loading page: ${c.message}</p>`,document.title=`Error - ${t}`,D(u.title,u.subtitleVariants),e.style.opacity="1",null}};l.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let l=e.getAttribute("href"),r=P(l);r!==P(window.location.pathname)&&X(r)})});let z=null,K=()=>P(window.location.pathname);e.addEventListener("click",e=>{let t=e.target.closest("a");if(!t||t.target&&"_self"!==t.target||t.hasAttribute("download")||"external"===t.getAttribute("rel"))return;let l=t.getAttribute("href");if(!l)return;if(l.startsWith("#")){let r=l.slice(1);if(!r)return;e.preventDefault();let i=K();history.pushState({path:i,hash:r},document.title,`${window.location.pathname}#${r}`),q(r,{animate:!0});return}let n=new URL(t.href,window.location.origin);if(n.origin!==window.location.origin)return;let a=P(n.pathname),o=H(a);if(!o)return;e.preventDefault();let s=n.hash?n.hash.slice(1):null;X(a).then(e=>{if(s){let t=e||a;history.replaceState({path:t,hash:s},document.title,`${t}#${s}`),q(s,{animate:!0})}})}),window.addEventListener("popstate",e=>{let t=e.state&&e.state.path?e.state.path:K(),l=e.state&&"string"==typeof e.state.hash?e.state.hash:window.location.hash?window.location.hash.slice(1):null;if(t===z){l?q(l,{animate:!0}):window.scrollTo({top:0,behavior:"smooth"});return}X(t,!1).then(()=>{l?requestAnimationFrame(()=>{q(l,{animate:!0})}):window.scrollTo({top:0,behavior:"smooth"})})}),window.addEventListener("hashchange",()=>{let e=window.location.hash?window.location.hash.slice(1):null;e?requestAnimationFrame(()=>{q(e,{animate:!0})}):window.scrollTo({top:0,behavior:"smooth"})});let G=P(window.location.pathname),Y=H(G);if(!Y){X("/",!1).then(()=>{history.replaceState({path:"/",hash:null},t,"/")});return}let U=window.location.hash?window.location.hash.slice(1):null;X(G,!1).then(e=>{let t=e||P(G);history.replaceState({path:t,hash:U},document.title,U?`${t}#${U}`:t),U&&requestAnimationFrame(()=>{q(U,{animate:!1})})})});
