document.addEventListener("DOMContentLoaded",()=>{let s=document.getElementById("content");if(!s)return;let d="David Wang",c=Array.from(document.querySelectorAll(".subtitle .menu a.item")),a=document.querySelector(".container > h1"),n=document.querySelector(".subtitle > span:first-child"),r=n?n.closest(".subtitle"):null,e=document.querySelector("footer"),i={menuMeasureSpan:null,highlightPromise:null,katexPromise:null};let t=e=>{var t;return e?(i.menuMeasureSpan||((t=document.createElement("span")).id="menu-measure",t.style.visibility="hidden",t.style.position="absolute",t.style.whiteSpace="nowrap",document.body.appendChild(t),i.menuMeasureSpan=t),t=i.menuMeasureSpan,e=window.getComputedStyle(e),t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStretch=e.fontStretch,t):null},o=e=>{var t=parseFloat(e.lineHeight);return Number.isFinite(t)?t:(t=parseFloat(e.fontSize),Number.isFinite(t)?1.2*t:16)},l=e=>{if(e){var i=e.closest(".subtitle")||e.closest("footer");if(i){var n=t(e);if(n){var a=i.offsetWidth,r=(n.textContent="0",n.offsetWidth),l=(e.classList.remove("menu--stacked"),e.offsetWidth,e.querySelectorAll(".item, a"));let t=0;l.forEach(e=>{t+=e.offsetWidth});var o=t+r*(l.length-1),l=i.classList.contains("subtitle")?i:null,s=l?l.querySelector("span:first-child"):null,d=[];if(s){let e=0;for(;s.hasAttribute("data-subtitle-"+e);)d.push(s.getAttribute("data-subtitle-"+e)),e++}if(a<o)s&&0<d.length&&(s.textContent=d[d.length-1],l.classList.add("subtitle--stacked")),e.classList.add("menu--stacked");else if(l&&s&&0<d.length){var c,u=4*r;let e=null;for(c of d)if(n.textContent=c,n.offsetWidth+u+o<=a){e=c;break}e?(s.textContent=e,l.classList.remove("subtitle--stacked")):(s.textContent=d[d.length-1],l.classList.add("subtitle--stacked"))}}}}},u=()=>{document.querySelectorAll(".menu").forEach(l)},m;u(),window.addEventListener("resize",()=>{clearTimeout(m),m=setTimeout(u,10)});var h=(e=>{if(!e)return[];var t,i=[];let n=0;for(;e.hasAttribute("data-subtitle-"+n);){var a=(e.getAttribute("data-subtitle-"+n)||"").trim();a&&i.push(a),n++}return i.length||(t=(e.textContent||"").trim())&&i.push(t),i})(n);let p={title:a?a.textContent.trim():d,subtitle:n?n.textContent.trim():"",subtitleVariants:h},g={"/":{fragment:"_content/home.html",documentTitle:d},"/projects":{fragment:"_content/projects.html",documentTitle:"Projects - "+d},"/writing":{fragment:"_content/writing.html",documentTitle:"Writing - "+d},"/index.html":{fragment:"_content/home.html",documentTitle:d}},v=(e,t={})=>{let i=document.createElement("link");return i.rel="stylesheet",i.href=e,Object.entries(t).forEach(([e,t])=>{void 0!==t&&(i[e]=t)}),document.head.appendChild(i),i},f=(n,a={})=>new Promise((e,t)=>{let i=document.createElement("script");i.src=n,Object.entries(a).forEach(([e,t])=>{void 0!==t&&(i[e]=t)}),i.onload=()=>e(i),i.onerror=()=>t(new Error("Failed to load script: "+n)),document.body.appendChild(i)}),I=()=>(i.katexPromise||(i.katexPromise=new Promise((e,t)=>{window.katex?e():(v("https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.css",{integrity:"sha384-WcoG4HRXMzYzfCgiyfrySxx90XSl2rxY5mnVY5TwtWE6KLrArNKn0T/mOgNL0Mmi",crossOrigin:"anonymous"}),f("https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.js",{integrity:"sha384-J+9dG2KMoiR9hqcFao0IBLwxt6zpcyN68IgwzsCSkbreXUjmNVRhPFTssqdSGjwQ",crossOrigin:"anonymous"}).then(()=>{e()}).catch(e=>{i.katexPromise=null,t(e)}))})),i.katexPromise),R=()=>(i.highlightPromise||(i.highlightPromise=new Promise((e,t)=>{window.hljs?e():(v("https://unpkg.com/@catppuccin/highlightjs@1.0.1/css/catppuccin-mocha.css"),f("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js").then(()=>{e()}).catch(e=>{i.highlightPromise=null,t(e)}))})),i.highlightPromise),b=(e,s)=>{if(e&&s){let n=document.createElement("div"),a=(n.className="code-block__custom-scrollbar",document.createElement("div")),r=(a.className="code-block__scrollbar-track",document.createElement("div"));r.className="code-block__scrollbar-thumb",a.appendChild(r),n.appendChild(a),e.appendChild(n);e=()=>{var e,t=s.scrollWidth,i=s.clientWidth;t<=i?n.style.display="none":(n.style.display="block",e=i/t*a.offsetWidth,t=s.scrollLeft/(t-i)*(a.offsetWidth-e),r.style.width=e+"px",r.style.left=t+"px")};s.addEventListener("scroll",e,{passive:!0});let i=!1,l=0,o=0;r.addEventListener("pointerdown",e=>{i=!0,l=e.clientX,o=s.scrollLeft,r.setPointerCapture(e.pointerId),e.preventDefault()}),r.addEventListener("pointermove",e=>{var t;i&&(e=e.clientX-l,t=s.scrollWidth-s.clientWidth,e=e/(a.offsetWidth-r.offsetWidth)*t,s.scrollLeft=o+e)}),r.addEventListener("pointerup",e=>{i=!1,r.releasePointerCapture(e.pointerId)}),r.addEventListener("pointercancel",e=>{i=!1,r.releasePointerCapture(e.pointerId)}),a.addEventListener("click",e=>{var t;e.target!==r&&(t=a.getBoundingClientRect(),e=e.clientX-t.left,t=s.scrollWidth-s.clientWidth,e=e/a.offsetWidth,s.scrollLeft=e*t)}),e(),new ResizeObserver(e).observe(s)}},M=(document.addEventListener("dragstart",e=>{if("IMG"===e.target.tagName)return e.preventDefault(),!1}),(e=document)=>{let t=e.querySelectorAll("pre code");0<t.length&&R().then(()=>{t.forEach(e=>{"undefined"!=typeof hljs&&hljs.highlightElement(e)})}).catch(e=>{console.error("Syntax highlighting unavailable:",e)}),e.querySelectorAll(".code-block").forEach(e=>{var t=e.querySelector(".code-scroll");t&&!e.querySelector(".code-block__custom-scrollbar")&&b(e,t)}),e.querySelectorAll(".code-language-tag").forEach(f=>{if("true"!==f.dataset.enhanced){let g=f.closest(".code-block");var b=g?g.querySelector("pre"):f.closest("pre");let v=b?b.querySelector("code"):null;if(b&&v){let e=g||b;b=g?g.querySelector(".code-scroll"):null;let t=()=>!(g&&void 0!==g._touchActive&&!g._touchActive||!e)&&e.matches(":hover"),i=(e=100)=>{g&&(g._hoverRemovalTimer&&(clearTimeout(g._hoverRemovalTimer),g._hoverRemovalTimer=null),g.classList.contains("code-block--hover")||(g._hoverAdditionTimer&&(clearTimeout(g._hoverAdditionTimer),g._hoverAdditionTimer=null),g._hoverAdditionTimer=setTimeout(()=>{g.classList.add("code-block--hover"),g._hoverAdditionTimer=null},e)))},n=(e=900)=>{g&&(g._hoverAdditionTimer&&(clearTimeout(g._hoverAdditionTimer),g._hoverAdditionTimer=null),g._hoverRemovalTimer&&clearTimeout(g._hoverRemovalTimer),g._hoverRemovalTimer=setTimeout(()=>{g._hoverPointerActive||g._hoverFocusActive||t()||g.classList.remove("code-block--hover"),g._hoverRemovalTimer=null},e))},a=e=>{g&&(g._hoverPointerActive=!!e,e)&&i()},r=e=>{g&&(g._hoverFocusActive=!!e,e)&&i()};let l=()=>{f._labelAnimation&&(f._labelAnimation.fadeOutTimer&&clearTimeout(f._labelAnimation.fadeOutTimer),f._labelAnimation.fadeInTimer&&clearTimeout(f._labelAnimation.fadeInTimer),f._labelAnimation=null,f._pendingLabel=null,f.style.transition="",f.style.opacity="1")},o=(e,{immediate:t=!1}={})=>{let n=(e||"").toLowerCase();if(n&&(t||f._currentLabel!==n&&f._pendingLabel!==n)){let i=()=>{f.textContent=n,f._currentLabel=n,f._pendingLabel=null};if(t)l(),i(),f.style.transition="",f.style.opacity="1";else{l(),f._pendingLabel=n;f.style.transition="opacity 0.12s ease",f.style.opacity="0";let t=setTimeout(()=>{i(),f.style.transition="opacity 0.22s ease",f.style.opacity="1";var e=setTimeout(()=>{l()},220);f._labelAnimation={fadeOutTimer:t,fadeInTimer:e}},120);f._labelAnimation={fadeOutTimer:t,fadeInTimer:null}}}},s="copy";var y=(f.textContent||"").trim().toLowerCase()||"code";f.dataset.originalLabel=y,f.dataset.enhanced="true",o(y,{immediate:!0}),f.setAttribute("role","button"),f.setAttribute("tabindex","0"),f.setAttribute("aria-label",`Copy ${y} to clipboard`);let d=()=>{f.dataset.state="",g&&g._hoverPointerActive?o(s):o(f.dataset.originalLabel)},c=()=>{"copied"!==f.dataset.state&&"error"!==f.dataset.state&&o(s)};let u=()=>{f.dataset.state="error",o("error"),f.blur(),f._copyTimer&&clearTimeout(f._copyTimer),f._copyTimer=setTimeout(d,1500)},m=()=>{f.dataset.state="copied",o("copied!"),f.blur(),f._copyTimer&&clearTimeout(f._copyTimer),f._copyTimer=setTimeout(d,1500)},h=async e=>{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select();let i=!1;try{i=document.execCommand("copy")}finally{document.body.removeChild(t)}return i},p=async()=>{var e=v.innerText||v.textContent||"";if(e)try{(await h(e)?m:u)()}catch(e){console.error("Unable to copy code block:",e),u()}else u()};y=()=>{g&&(g._touchActive=!1),a(!1),"copied"!==f.dataset.state&&"error"!==f.dataset.state&&o(f.dataset.originalLabel)};e&&(e.addEventListener("mouseenter",()=>{a(!0),c()}),e.addEventListener("mouseleave",()=>{a(!1),"copied"!==f.dataset.state&&"error"!==f.dataset.state&&o(f.dataset.originalLabel),n(0)}),e.addEventListener("touchstart",()=>{g&&(g._touchActive=!0),a(!0),c()},{passive:!0}),e.addEventListener("touchend",y),e.addEventListener("touchcancel",y)),b&&b.addEventListener("scroll",()=>{i(0),g&&g._scrollEndTimer&&clearTimeout(g._scrollEndTimer),g&&g._touchActive||(t()?(a(!0),c()):g&&g._hoverFocusActive||g&&(g._scrollEndTimer=setTimeout(()=>{n(300),g._scrollEndTimer=null},150)))},{passive:!0}),f.addEventListener("focus",()=>{r(!0),c()}),f.addEventListener("blur",()=>{r(!1),g&&g._hoverPointerActive?c():("copied"!==f.dataset.state&&"error"!==f.dataset.state&&o(f.dataset.originalLabel),n(0))}),f.addEventListener("click",e=>{e.preventDefault(),r(!0),c(),p()}),f.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r(!0),c(),p())})}}})}),O=e=>(e||"").toLowerCase().trim().replace(/["'`~!@#$%^&*()=+\[\]{}|;:\\<>,.?/]+/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),B=(e,t)=>{if(!e)return null;var i=(e.getAttribute("id")||"").trim();if(i)return i;let n=t||"section",a=2;for(;document.getElementById(n);)n=`${t||"section"}-`+a++;return e.setAttribute("id",n),n},y=(t,e)=>{t=t.querySelector("[data-toc]");if(t){let n=[];var i=a?B(a,"introduction"):null;if(i&&n.push({level:1,id:i,label:"Introduction"}),e.forEach(t=>{var i=parseInt((t.tagName||"").slice(1),10);if(!(!t.id||Number.isNaN(i)||i<2||3<i)){let e=t.dataset.headingLabel;e||(e=(t.textContent||"").trim().replace(/^#\s*/,""),t.dataset.headingLabel=e),n.push({level:i,id:t.id,label:e})}}),n.length){t.classList.remove("is-empty"),t.innerHTML="";let e=document.createElement("ol"),a=(e.className="writing-toc__list",t.appendChild(e),null);n.forEach(t=>{if(1===t.level)(i=document.createElement("li")).className="writing-toc__item writing-toc__item--level-1",(n=document.createElement("a")).href="#"+t.id,n.textContent=t.label,i.appendChild(n),e.appendChild(i),a=null;else if(2===t.level)(n=document.createElement("li")).className="writing-toc__item writing-toc__item--level-2",(i=document.createElement("a")).href="#"+t.id,i.textContent=t.label,n.appendChild(i),e.appendChild(n),a=n;else if(3===t.level)if(a){let e=a.querySelector("ol");e||((e=document.createElement("ol")).className="writing-toc__sublist",a.appendChild(e));var i=document.createElement("li"),n=(i.className="writing-toc__item writing-toc__item--level-3",document.createElement("a"));n.href="#"+t.id,n.textContent=t.label,i.appendChild(n),e.appendChild(i)}else(n=document.createElement("li")).className="writing-toc__item writing-toc__item--level-2",(i=document.createElement("a")).href="#"+t.id,i.textContent=t.label,n.appendChild(i),e.appendChild(n),a=n})}else t.innerHTML="",t.classList.add("is-empty")}},w=(e=document)=>{let l=e.querySelector(".writing-post__rail-right");if(l){e=e.querySelector(".writing-post__content");if(e){var t=l.querySelector(".sidenote--rail");if(!t||"none"!==window.getComputedStyle(t).display){t=Array.from(e.querySelectorAll("label.sidenote-number"));if(t.length){let a=e.getBoundingClientRect(),r=[];t.forEach(e=>{var t,i,n=e.getAttribute("for");n&&(n=l.querySelector(`.sidenote--rail[data-sidenote-ref="${n}"]`))&&(i=e.parentElement)&&(t=i.getBoundingClientRect(),i=window.getComputedStyle(i),i=o(i),e=e.getBoundingClientRect().top-t.top,e=Math.round(e/i)*i,i=t.top-a.top+e,r.push({sidenote:n,idealTop:i,height:0}))}),r.forEach((t,i)=>{t.sidenote.style.top=t.idealTop+"px",t.height=t.sidenote.getBoundingClientRect().height;var e=window.getComputedStyle(t.sidenote),n=.5*o(e);for(let e=0;e<i;e++){var a=r[e],a=(parseFloat(a.sidenote.style.top)||0)+a.height;(parseFloat(t.sidenote.style.top)||0)<a+n&&(t.sidenote.style.top=(a=a+n)+"px",t.idealTop=a)}})}}}}},E;window.addEventListener("resize",()=>{clearTimeout(E),E=setTimeout(()=>{w(document)},10)});let _=(e,{animate:t=!0}={})=>!!e&&!!(e=document.getElementById(e))&&(e.scrollIntoView({behavior:t?"smooth":"auto",block:"start",inline:"nearest"}),!0),T=null,A=!1,L=e=>{T!==e&&(T&&T.removeAttribute("data-selection-active"),(T=e||null)?(T.setAttribute("data-selection-active","true"),document.body.setAttribute("data-selection-lock","true")):document.body.removeAttribute("data-selection-lock"))},C=()=>{T&&(T.removeAttribute("data-selection-active"),T=null),document.body.removeAttribute("data-selection-lock"),A=!1},x=e=>e&&e instanceof Node&&(e=e.nodeType===Node.TEXT_NODE?e.parentNode:e)&&e instanceof Element&&(e.closest(".sidenote")||e.closest(".math-display")||e.closest("table")||e.closest(".writing-post__content"))||null;document.addEventListener("pointerdown",e=>{e=x(e.target);e?(L(e),A=!0):C()},{capture:!0});document.addEventListener("pointerup",()=>{var e;A=!1,document.getSelection&&(e=document.getSelection())&&!e.isCollapsed||C()}),document.addEventListener("pointercancel",C),window.addEventListener("blur",C),document.addEventListener("selectionchange",()=>{var e=document.getSelection?document.getSelection():null;e&&!e.isCollapsed&&0!==e.rangeCount&&(e=x(e.anchorNode)||x(e.focusNode))?L(e):A||C()});let S=e=>{if(!e)return"/";let t=e.split("?")[0].split("#")[0];return(t=1<(t=t.startsWith("/")?t:"/"+t).length&&t.endsWith("/")?t.slice(0,-1):t)||"/"},k=e=>{var e=S(e);return g[e]||(e.startsWith("/writing/")&&e.length>"/writing/".length&&(e=e.slice("/writing/".length))&&(e=e.replace(/\/+/g,"").replace(/\.html$/i,""))?{fragment:`_content/writing/${e}.html`,documentTitle:null,canonicalPath:"/writing/"+e}:null)},N=()=>{var e;return p.subtitleVariants&&0<p.subtitleVariants.length?[...p.subtitleVariants]:(e=(p.subtitle||"").trim())?[e]:[]},V=e=>{var t;return Array.isArray(e)?(t=e.map(e=>(e||"").trim()).filter(Boolean)).length?t:N():"string"==typeof e&&(t=e.trim())?[t]:N()},q=(t,i)=>{if(a&&(a.textContent=t||p.title,a.classList.add("loaded")),n){t=V(i),i=t[0]||p.subtitle||"";n.textContent=i;let e=0;for(;n.hasAttribute("data-subtitle-"+e);)n.removeAttribute("data-subtitle-"+e),e++;t.forEach((e,t)=>{n.setAttribute("data-subtitle-"+t,e)}),r&&r.classList.add("loaded")}e&&e.classList.add("loaded")},W=async(e,t=!0)=>{var e=S(e),i=k(e);if(!i||!i.fragment)return console.error("No route found for path: "+e),s.innerHTML="<p>Page not found.</p>",document.title="Not Found - "+d,q(p.title,p.subtitleVariants),null;var n,a,e=i.canonicalPath||e,r=i.fragment.startsWith("/")?i.fragment:"/"+i.fragment;try{var l,o=await fetch(r);if(o.ok)return l=await o.text(),s.style.opacity="0",a=150,await new Promise(e=>setTimeout(e,a)),s.innerHTML=l,C(),[n=document]=[s],n.querySelectorAll(".writing-post table").forEach(e=>{var t,i;e.parentElement&&e.parentElement.classList.contains("table-wrapper")||((t=document.createElement("div")).className="table-wrapper",(i=document.createElement("div")).className="table-scroll",e.parentNode.insertBefore(t,e),i.appendChild(e),t.appendChild(i),b(t,i))}),M(s),((e=document)=>{let t=e.querySelectorAll(".math-inline, .math-display");0!==t.length&&I().then(()=>{t.forEach(e=>{if("true"!==e.dataset.rendered){var t=e.textContent,i=e.classList.contains("math-display");try{"undefined"!=typeof katex&&(katex.render(t,e,{displayMode:i,throwOnError:!1,output:"html"}),e.dataset.rendered="true")}catch(e){console.error("Error rendering math:",e)}}})}).catch(e=>{console.error("KaTeX unavailable:",e)})})(s),((e=document)=>{var t=e.querySelectorAll("h2, h3");if(t.length){let h=new Set(Array.from(document.querySelectorAll("[id]")).map(e=>e.id));t.forEach(n=>{let a=n.dataset.headingLabel;if(a||(a=(n.textContent||"section").trim().replace(/^#\s*/,""),n.dataset.headingLabel=a),"true"!==n.dataset.headingEnhanced){let i=(n.getAttribute("id")||"").trim();if(!i){var r=O(a)||"section";let e=r,t=2;for(;h.has(e);)e=r+"-"+t++;i=e,n.setAttribute("id",i),h.add(i)}var e=n.querySelector(".heading-anchor");if(!e){(e=document.createElement("a")).className="heading-anchor",e.href="#"+i,e.setAttribute("aria-label","Link to section: "+a),e.textContent="#";for(var t,l,o,s,d,c,u=[],m=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1);t=m.nextNode();)t.textContent.trim()&&u.push(t);0<u.length&&(d=(o=(l=u[u.length-1]).textContent).trimEnd(),o=o.slice(d.length),c=d.lastIndexOf(" "),s=d.slice(0,c+1),d=d.slice(c+1))?((c=document.createElement("span")).style.whiteSpace="nowrap",c.textContent=d,c.appendChild(e),l.textContent=s+o,l.parentNode.insertBefore(c,l.nextSibling)):n.appendChild(e)}n.dataset.headingEnhanced="true"}}),y(e,t),w(e)}else y(e,t)})(s),(t=>{var i=s.querySelector("[data-page-title]");if(i){var n,a=(i.getAttribute("data-page-title")||"").trim(),r=[];let e=0;for(;i.hasAttribute("data-page-subtitle-"+e);){var l=(i.getAttribute("data-page-subtitle-"+e)||"").trim();l&&r.push(l),e++}0===r.length&&(n=(i.getAttribute("data-page-subtitle")||"").trim())&&r.push(n),q(a||p.title,0<r.length?r:p.subtitleVariants),!t.documentTitle&&a&&(document.title=a+" - "+d),void u()}else t&&t.heading?({title:n,subtitle:a}=t.heading,q(n,a)):q(p.title,p.subtitleVariants),u()})(i),i.documentTitle&&(document.title=i.documentTitle),(e=>{e=S(e);let t=e.startsWith("/writing/")?"/writing":e;c.forEach(e=>{S(e.getAttribute("href"))===t?e.classList.add("active"):e.classList.remove("active")})})(e),t&&(history.pushState({path:e,hash:null},document.title,e),window.scrollTo(0,0)),P=e,s.style.opacity="1",e;throw new Error(`HTTP ${o.status}: `+o.statusText)}catch(e){return console.error("Error loading content:",e),s.innerHTML=`<p>Error loading page: ${e.message}</p>`,document.title="Error - "+d,q(p.title,p.subtitleVariants),s.style.opacity="1",null}},P=(c.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e=t.getAttribute("href"),e=S(e);e!==S(window.location.pathname)&&W(e)})}),null),F=()=>S(window.location.pathname),j=(s.addEventListener("click",e=>{var t=e.target.closest("a");if(t&&!(t.target&&"_self"!==t.target||t.hasAttribute("download")||"external"===t.getAttribute("rel"))){var i=t.getAttribute("href");if(i)if(i.startsWith("#")){i=i.slice(1);i&&(e.preventDefault(),n=F(),history.pushState({path:n,hash:i},document.title,window.location.pathname+"#"+i),_(i,{animate:!0}))}else{var n=new URL(t.href,window.location.origin);if(n.origin===window.location.origin){let i=S(n.pathname);if(k(i)){e.preventDefault();let t=n.hash?n.hash.slice(1):null;W(i).then(e=>{t&&(e=e||i,history.replaceState({path:e,hash:t},document.title,e+"#"+t),_(t,{animate:!0}))})}}}}}),window.addEventListener("popstate",e=>{var t=e.state&&e.state.path?e.state.path:F();let i=e.state&&"string"==typeof e.state.hash?e.state.hash:window.location.hash?window.location.hash.slice(1):null;t===P?i?_(i,{animate:!0}):window.scrollTo({top:0,behavior:"smooth"}):W(t,!1).then(()=>{i?requestAnimationFrame(()=>{_(i,{animate:!0})}):window.scrollTo({top:0,behavior:"smooth"})})}),window.addEventListener("hashchange",()=>{let e=window.location.hash?window.location.hash.slice(1):null;e?requestAnimationFrame(()=>{_(e,{animate:!0})}):window.scrollTo({top:0,behavior:"smooth"})}),S(window.location.pathname));if(k(j)){let t=window.location.hash?window.location.hash.slice(1):null;W(j,!1).then(e=>{e=e||S(j);history.replaceState({path:e,hash:t},document.title,t?e+"#"+t:e),t&&requestAnimationFrame(()=>{_(t,{animate:!1})})})}else W("/",!1).then(()=>{history.replaceState({path:"/",hash:null},d,"/")})});